(function(t){function e(e){for(var a,i,d=e[0],s=e[1],u=e[2],m=0,c=[];m<d.length;m++)i=d[m],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&c.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(c.length)c.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,d=1;d<r.length;d++){var s=r[d];0!==n[s]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],s=d.push.bind(d);d.push=e,d=d.slice();for(var u=0;u<d.length;u++)e(d[u]);var l=s;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},2395:function(t,e,r){},"24b9":function(t,e,r){"use strict";var a=r("81a7"),n=r.n(a);n.a},3914:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("header",[r("h1",[t._v("帝成订单管理系统")]),r("button",{on:{click:t.handleClear}},[t._v("清空记录")])]),r("main",[r("dc-form",{attrs:{goods:t.goods,customers:t.customers},on:{"add-order":t.handleAddOrder}}),r("dc-table",{attrs:{orders:t.orders},on:{"delete-order":t.handleDeleteOrder,"edit-paiddate":t.handleUpdateDate,"edit-paidamount":t.handleUpdateAmount}})],1),r("footer",{on:{click:t.goTop}},[t._m(0)])])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h4",[t._v("回到顶部"),r("span",{staticClass:"fa fa-arrow-up"})])}],i=(r("caad"),r("a434"),r("b0c0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"dc-form"}},[r("button",{attrs:{id:"show-order"},on:{click:t.handleShowOrder}},[t._v(t._s(t.showOrder?"关闭表单":"添加新订单"))]),t.showOrder?r("form",{attrs:{id:"order-form"}},[r("label",{attrs:{for:"#customer"}},[t._v("客户名称：")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.customer,expression:"form.customer",modifiers:{trim:!0}}],attrs:{id:"customer",type:"text",list:"customers-cache"},domProps:{value:t.form.customer},on:{input:function(e){e.target.composing||t.$set(t.form,"customer",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("datalist",{attrs:{id:"customers-cache"}},t._l(t.customers,(function(t,e){return r("option",{domProps:{value:t}})})),0),r("label",{attrs:{for:"#orderdate"}},[t._v("下单日期：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.orderdate,expression:"form.orderdate"}],attrs:{id:"orderdate",type:"date"},domProps:{value:t.form.orderdate},on:{input:function(e){e.target.composing||t.$set(t.form,"orderdate",e.target.value)}}}),r("label",{attrs:{for:"#goods"}},[t._v("商品详情：")]),r("div",{attrs:{id:"goods"}},[r("div",{attrs:{id:"goods-table"}},[this.form.goods.length?r("table",[t._m(0),r("tbody",[t._l(t.form.goods,(function(e,a){return r("tr",{key:a},[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.price))]),r("td",[t._v(t._s(e.number))]),r("td",[t._v(t._s(e.amount))]),r("td",[r("i",{staticClass:"delete fa fa-trash",on:{click:function(e){return t.handleDeleteGood(a)}}})])])})),this.form.goods.length?r("tr",[r("td",{attrs:{colspan:"2"}},[t._v("商品总价")]),r("td",{attrs:{colspan:"3"}},[t._v(t._s(t.form.orderamount))])]):t._e()],2)]):t._e()]),r("form",{attrs:{id:"goods-form"}},[r("label",{attrs:{for:"#good-name"}},[t._v("商品名称：")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.good.name,expression:"good.name",modifiers:{trim:!0}}],attrs:{id:"good-name",type:"text",list:"goods-cache"},domProps:{value:t.good.name},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleAddGood(e)},input:function(e){e.target.composing||t.$set(t.good,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("datalist",{attrs:{id:"goods-cache"}},t._l(t.goods,(function(t,e){return r("option",{domProps:{value:t}})})),0),r("label",{attrs:{for:"#good-price"}},[t._v("商品单价：")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.good.price,expression:"good.price",modifiers:{number:!0}}],attrs:{id:"good-price",type:"number"},domProps:{value:t.good.price},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleAddGood(e)},input:function(e){e.target.composing||t.$set(t.good,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"#good-number"}},[t._v("商品数量：")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.good.number,expression:"good.number",modifiers:{number:!0}}],attrs:{id:"good-number",type:"number"},domProps:{value:t.good.number},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleAddGood(e)},input:function(e){e.target.composing||t.$set(t.good,"number",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("button",{attrs:{id:"add-good"},on:{click:function(e){return e.preventDefault(),t.handleAddGood(e)}}},[t._v("添加商品")])]),r("div",{staticClass:"warning"},[t._v(t._s(t.warning))])]),r("button",{attrs:{id:"add-order"},on:{click:function(e){return e.preventDefault(),t.handleAddOrder()}}},[t._v("添加订单")])]):t._e()])}),d=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("名称")]),r("th",[t._v("单价")]),r("th",[t._v("数量")]),r("th",[t._v("总价")]),r("th",[t._v("删除")])])])}],s=(r("0d03"),r("2ef0")),u=r.n(s),l=(r("1f54"),{name:"DcForm",props:{goods:Array,customers:Array},data:function(){return{showOrder:!1,form:{id:0,customer:"",orderdate:"",goods:[],orderamount:0,paiddate:"",paidamount:0},good:{name:"",price:0,number:0,amount:0},warning:""}},methods:{handleShowOrder:function(){this.showOrder=!this.showOrder},handleAddGood:function(){this.good.name?+this.good.price<=0?this.warning="商品单价必须大于0！":+this.good.number<=0?this.warning="商品数量必须大于0！":(this.warning="",this.good.amount=this.good.price*this.good.number,this.form.goods.push(this.good),this.good={name:"",price:0,number:0,amount:0},this.calcAmount()):this.warning="请填写商品名称！"},handleDeleteGood:function(t){this.form.goods.splice(t,1),this.calcAmount()},handleAddOrder:function(){this.form.customer?this.form.orderdate?Date.parse(this.form.orderdate)>Date.now()?this.warning="下单日期不能晚于今天！":this.form.goods.length?(this.warning="",this.form.id=Date.now(),this.$emit("add-order",this.form),this.form={id:0,customer:"",orderdate:"",goods:[],orderamount:0,paiddate:"",paidamount:0}):this.warning="商品不能为空！":this.warning="请输入下单日期！":this.warning="请输入客户名称！"},calcAmount:function(){this.form.orderamount=u.a.sumBy(this.form.goods,(function(t){return t.amount}))}}}),m=l,c=(r("24b9"),r("2877")),p=Object(c["a"])(m,i,d,!1,null,"ce368b16",null),f=p.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"dc-table"}},[r("div",{staticClass:"filter"},[r("button",{on:{click:function(e){t.showFilter=!t.showFilter}}},[t._v("筛选")]),t.showFilter?[r("div",{staticClass:"filteritem"},[r("label",{attrs:{for:"#filter-customer"}},[t._v("筛选客户：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterCustomer,expression:"filterCustomer"}],attrs:{id:"filter-customer",type:"text"},domProps:{value:t.filterCustomer},on:{input:function(e){e.target.composing||(t.filterCustomer=e.target.value)}}})]),r("div",{staticClass:"filteritem"},[r("label",{attrs:{for:"#start-date"}},[t._v("起始时间：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],attrs:{id:"start-date",type:"date"},domProps:{value:t.startDate},on:{input:function(e){e.target.composing||(t.startDate=e.target.value)}}})]),r("div",{staticClass:"filteritem"},[r("label",{attrs:{for:"#end-date"}},[t._v("结束时间：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],attrs:{id:"end-date",type:"date"},domProps:{value:t.endDate},on:{input:function(e){e.target.composing||(t.endDate=e.target.value)}}})]),r("div",{staticClass:"filteritem"},[r("label",{attrs:{for:"#min-amount"}},[t._v("最小金额：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.minAmount,expression:"minAmount"}],attrs:{id:"min-amount",type:"number"},domProps:{value:t.minAmount},on:{input:function(e){e.target.composing||(t.minAmount=e.target.value)}}})]),r("div",{staticClass:"filteritem"},[r("label",{attrs:{for:"#max-amount"}},[t._v("最大金额：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.maxAmount,expression:"maxAmount"}],attrs:{id:"max-amount",type:"number"},domProps:{value:t.maxAmount},on:{input:function(e){e.target.composing||(t.maxAmount=e.target.value)}}})]),r("div",{staticClass:"filteritem"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.paidFilter,expression:"paidFilter"}],attrs:{id:"paid-all",type:"radio",value:"0"},domProps:{checked:t._q(t.paidFilter,"0")},on:{change:function(e){t.paidFilter="0"}}}),r("label",{attrs:{for:"#paid-all"}},[t._v("全部")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.paidFilter,expression:"paidFilter"}],attrs:{id:"paid-yes",type:"radio",value:"1"},domProps:{checked:t._q(t.paidFilter,"1")},on:{change:function(e){t.paidFilter="1"}}}),r("label",{attrs:{for:"#paid-yes"}},[t._v("已付款")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.paidFilter,expression:"paidFilter"}],attrs:{id:"paid-no",type:"radio",value:"2"},domProps:{checked:t._q(t.paidFilter,"2")},on:{change:function(e){t.paidFilter="2"}}}),r("label",{attrs:{for:"#paid-no"}},[t._v("未付款")])])]:t._e(),r("button",{on:{click:function(e){t.showAnalyze=!t.showAnalyze}}},[t._v("统计")]),t.showAnalyze?r("div",{staticClass:"analyze"},[r("div",{staticClass:"analyzeitem"},[r("label",{attrs:{for:"#analyze-start-date"}},[t._v("起始时间：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.analyzeStartDate,expression:"analyzeStartDate"}],attrs:{id:"analyze-start-date",type:"date"},domProps:{value:t.analyzeStartDate},on:{input:function(e){e.target.composing||(t.analyzeStartDate=e.target.value)}}})]),r("div",{staticClass:"analyzeitem"},[r("label",{attrs:{for:"#analyze-end-date"}},[t._v("结束时间：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.analyzeEndDate,expression:"analyzeEndDate"}],attrs:{id:"analyze-end-date",type:"date"},domProps:{value:t.analyzeEndDate},on:{input:function(e){e.target.composing||(t.analyzeEndDate=e.target.value)}}})]),r("div",{staticClass:"analyzeitem"},[r("button",{attrs:{id:"analyze"},on:{click:t.handleAnalyze}},[t._v("统计当前时间段数据")])]),t.analyzedInfo?r("table",[t._m(0),r("tbody",t._l(t.analyzedInfo,(function(e,a){return e.orders.number||e.paids.number?r("tr",[r("th",[t._v(t._s(a))]),r("th",[t._v(t._s(e.orders.number))]),r("th",[t._v(t._s(e.orders.amount))]),r("th",[t._v(t._s(e.paids.number))]),r("th",[t._v(t._s(e.paids.amount))])]):t._e()})),0)]):t._e()]):t._e()],2),this.orders.length?r("table",[t._m(1),r("tbody",[t._l(t.filteredorders,(function(e,a){return[r("tr",{staticClass:"row"},[r("td",[t._v(t._s(e.customer))]),r("td",[t._v(t._s(e.orderdate))]),r("td",[r("button",{on:{click:function(e){e.preventDefault(),t.currentDetail=t.currentDetail==a?-1:a}}},[t._v(t._s(e.orderamount))])]),r("td",{on:{dblclick:function(e){t.dateEditing=a}}},[t.dateEditing!=a?r("span",[t._v(t._s(e.paiddate))]):t._e(),t.dateEditing==a?r("input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"date"},domProps:{value:e.paiddate},on:{blur:function(r){return t.handleUpdateDate(r.target.value,e.id)}}}):t._e()]),r("td",{on:{dblclick:function(e){t.amountEditing=a}}},[t.amountEditing!=a?r("span",[t._v(t._s(e.paidamount))]):t._e(),t.amountEditing==a?r("input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"number"},domProps:{value:e.paidamount},on:{blur:function(r){return t.handleUpdateAmount(+r.target.value,e.id)}}}):t._e()]),r("td",[r("span",{staticClass:"fa fa-trash",on:{click:function(r){return t.handleDeleteOrder(e.id)}}})])]),r("tr",{directives:[{name:"show",rawName:"v-show",value:t.currentDetail==a,expression:"currentDetail==oindex"}],staticClass:"detail"},[r("td",{attrs:{colspan:"6"}},[r("table",[t._m(2,!0),r("tbody",t._l(e.goods,(function(e,a){return r("tr",[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.price))]),r("td",[t._v(t._s(e.number))]),r("td",[t._v(t._s(e.amount))])])})),0)])])])]}))],2)]):t._e()])},h=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("客户")]),r("th",[t._v("下单数量")]),r("th",[t._v("下单金额")]),r("th",[t._v("付款数量")]),r("th",[t._v("付款金额")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("客户")]),r("th",[t._v("下单日期")]),r("th",[t._v("下单金额")]),r("th",[t._v("付款日期")]),r("th",[t._v("付款金额")]),r("th",[t._v("删除")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("商品")]),r("th",[t._v("单价")]),r("th",[t._v("数量")]),r("th",[t._v("总价")])])])}],g=(r("4de4"),r("4160"),r("4e82"),r("4d63"),r("ac1f"),r("25f0"),r("159b"),{name:"DcTable",data:function(){return{currentDetail:-1,dateEditing:-1,amountEditing:-1,filterCustomer:"",startDate:"",endDate:"",paidFilter:0,minAmount:0,maxAmount:0,showFilter:!1,showAnalyze:!1,analyzeStartDate:"",analyzeEndDate:"",analyzedInfo:null}},directives:{focus:{inserted:function(t){t.focus()}}},computed:{filteredorders:function(){var t=u.a.cloneDeep(this.orders);return t=t.filter(function(t){return new RegExp(this.filterCustomer,"i").test(t.customer)}.bind(this)),this.startDate&&(t=t.filter(function(t){return Date.parse(t.orderdate)>=Date.parse(this.startDate)}.bind(this))),this.endDate&&(t=t.filter(function(t){return Date.parse(t.orderdate)<=Date.parse(this.endDate)}.bind(this))),this.minAmount>0&&(t=t.filter(function(t){return t.orderamount>=this.minAmount}.bind(this))),this.maxAmount>0&&(t=t.filter(function(t){return t.orderamount<=this.maxAmount}.bind(this))),+this.paidFilter&&(t=t.filter(function(t){return 1==+this.paidFilter?t.paidamount&&t.paidamount>0:!(t.paidamount&&t.paidamount>0)}.bind(this))),t=t.sort((function(t,e){return Date.parse(e.orderdate)-Date.parse(t.orderdate)})),t}},props:{orders:Array},methods:{handleDeleteOrder:function(t){this.$emit("delete-order",t)},handleUpdateDate:function(t,e){t&&this.$emit("edit-paiddate",{id:e,paiddate:t}),this.dateEditing=-1},handleUpdateAmount:function(t,e){t>0&&this.$emit("edit-paidamount",{id:e,paidamount:t}),this.amountEditing=-1},handleAnalyze:function(){var t=this,e=u.a.cloneDeep(this.orders),r={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];r[n.customer]={orders:{number:0,amount:0},paids:{number:0,amount:0}}}r["总计"]={orders:{number:0,amount:0},paids:{number:0,amount:0}},e.forEach((function(e){(!t.analyzeStartDate||Date.parse(e.orderdate)>=Date.parse(t.analyzeStartDate))&&(!t.analyzeEndDate||Date.parse(e.orderdate)<=Date.parse(t.analyzeEndDate))&&(r[e.customer].orders.number++,r[e.customer].orders.amount+=e.orderamount,r["总计"].orders.number++,r["总计"].orders.amount+=e.orderamount),e.paiddate&&(!t.analyzeStartDate||Date.parse(e.paiddate)>=Date.parse(t.analyzeStartDate))&&(!t.analyzeEndDate||Date.parse(e.paiddate)<=Date.parse(t.analyzeEndDate))&&(r[e.customer].paids.number++,r[e.customer].paids.amount+=e.paidamount,r["总计"].paids.number++,r["总计"].paids.amount+=e.paidamount)})),this.analyzedInfo=r}}}),_=g,b=(r("8f73"),Object(c["a"])(_,v,h,!1,null,"47220e74",null)),y=b.exports,D=r("a002"),w=r.n(D),x={name:"app",components:{"dc-form":f,"dc-table":y},data:function(){return{orders:[]}},computed:{customers:function(){for(var t=[],e=0;e<this.orders.length;e++){var r=this.orders[e];t.includes(r.customer)||t.push(r.customer)}return t},goods:function(){for(var t=[],e=0;e<this.orders.length;e++)for(var r=this.orders[e],a=0;a<r.goods.length;a++){var n=r.goods[a];t.includes(n.name)||t.push(n.name)}return t}},created:function(){w.a.getItem("orders").then(function(t){this.orders=t||[]}.bind(this))},watch:{orders:{handler:function(t){w.a.setItem("orders",t)},deep:!0}},methods:{handleAddOrder:function(t){this.orders.push(t)},handleClear:function(){var t=confirm("确定要清空记录吗？");t&&(t=confirm("清空记录之后无法恢复，确定要清空吗？")),t&&(t=confirm("再问一遍，确定清空吗？")),t&&(this.orders=[])},handleDeleteOrder:function(t){for(var e=0;e<this.orders.length;e++){var r=this.orders[e];if(r.id==t){this.orders.splice(e,1);break}}},handleUpdateDate:function(t){for(var e=t.id,r=t.paiddate,a=0;a<this.orders.length;a++){var n=this.orders[a];if(n.id==e){n.paiddate=r;break}}},handleUpdateAmount:function(t){for(var e=t.id,r=t.paidamount,a=0;a<this.orders.length;a++){var n=this.orders[a];if(n.id==e){n.paidamount=r;break}}},goTop:function(){scrollTo(0,0)}}},A=x,k=(r("7c55"),Object(c["a"])(A,n,o,!1,null,null,null)),z=k.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(z)}}).$mount("#app")},"7c55":function(t,e,r){"use strict";var a=r("2395"),n=r.n(a);n.a},"81a7":function(t,e,r){},"8f73":function(t,e,r){"use strict";var a=r("3914"),n=r.n(a);n.a}});
//# sourceMappingURL=app.7bc83a88.js.map